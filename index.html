<!DOCTYPE html>
<html lang="uk">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Hilton Chat Widget</title>

  <!-- External Dependencies -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Roboto:wght@400;500&family=Lato&family=Montserrat&family=Poppins&family=Oswald&family=Nunito&family=Rubik&family=Ubuntu&family=Exo+2&family=Work+Sans&family=Fira+Sans&family=Anton&family=Manrope&family=Mulish&family=Titillium+Web&family=PT+Sans&family=Bebas+Neue&family=Abril+Fatface&family=Lobster&family=Righteous&family=Russo+One&family=Permanent+Marker&family=Fjalla+One&family=Asap&family=Cairo&display=swap"
    rel="stylesheet">

  <!-- Widget Styles -->
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>

  <!-- ADMIN TOGGLE -->
  <button id="open-admin-btn" aria-label="Відкрити налаштування">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path
        d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.35a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" />
      <circle cx="12" cy="12" r="3" />
    </svg>
  </button>

  <!-- ADMIN PANEL -->
  <div id="admin-panel" class="hidden-panel">
    <div class="flex justify-between items-center mb-4">
      <h3 class="font-bold text-lg">⚙️ Налаштування</h3>
      <button id="close-admin-btn" class="text-gray-400 hover:text-gray-600 p-1">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <!-- Font Selection -->
    <div class="admin-control">
      <span class="admin-label">Шрифт (50+)</span>
      <select id="font-select" class="admin-input" style="font-family: inherit;"></select>
    </div>

    <!-- Shape & Icon -->
    <div class="admin-control">
      <span class="admin-label">Форма кнопки</span>
      <div class="shape-grid" id="shape-selector">
        <div class="shape-option active" data-shape="shape-pill">
          <div class="shape-preview"></div><span>Овал</span>
        </div>
        <div class="shape-option" data-shape="shape-rounded">
          <div class="shape-preview"></div><span>Квадрат</span>
        </div>
        <div class="shape-option" data-shape="shape-circle">
          <div class="shape-preview"></div><span>Круг</span>
        </div>
      </div>
    </div>

    <div class="admin-control">
      <span class="admin-label">Иконка</span>
      <div class="icon-grid" id="icon-selector"></div>
    </div>

    <!-- Size Control -->
    <div class="admin-control">
      <span class="admin-label">Размер кнопки <span id="val-scale"
          class="text-xs font-normal lowercase">1.0</span></span>
      <input type="range" id="input-scale" min="0.5" max="1.5" step="0.1" value="1">
    </div>

    <!-- Positioning -->
    <div class="admin-control">
      <span class="admin-label">Позиция X (Смещение) <span id="val-offset-x"
          class="text-xs font-normal lowercase">0px</span></span>
      <input type="range" id="input-offset-x" min="-100" max="100" value="0">
    </div>
    <div class="admin-control">
      <span class="admin-label">Позиция Y (Смещение) <span id="val-offset-y"
          class="text-xs font-normal lowercase">0px</span></span>
      <input type="range" id="input-offset-y" min="-100" max="200" value="0">
    </div>

    <div class="admin-control">
      <span class="admin-label">Сторона</span>
      <select id="position-select" class="admin-input">
        <option value="widget-pos-right" selected>Справа</option>
        <option value="widget-pos-center">Центр</option>
        <option value="widget-pos-left">Зліва</option>
      </select>
    </div>

    <hr class="border-gray-200 my-4">

    <!-- Hotel Settings -->
    <div class="admin-control">
      <span class="admin-label">Назва готелю</span>
      <input type="text" id="hotel-name-input" class="admin-input" placeholder="Введіть назву" value="Hilton">
    </div>
    <div class="admin-control">
      <span class="admin-label">Информация об отеле</span>
      <textarea id="hotel-info-input" class="admin-input admin-textarea" rows="4"
        placeholder="Правила проживания, ресторан, SPA, услуги..."></textarea>
    </div>
    <div class="admin-control">
      <span class="admin-label">Логотип</span>
      <label class="file-upload-btn">
        Обрати файл
        <input type="file" id="logo-upload" accept="image/*" style="display: none;">
      </label>
    </div>
    <div class="admin-control">
      <span class="admin-label">Колір</span>
      <div class="color-picker-wrapper">
        <input type="color" id="accent-color-picker" value="#2563eb">
        <span id="color-value-text" class="text-sm font-mono opacity-70">#2563eb</span>
      </div>
    </div>

    <div class="admin-control">
      <span class="admin-label">Текст кнопки</span>
      <select id="button-text-select" class="admin-input">
        <option value="Спросите Наш ИИ">Спросите Наш ИИ</option>
        <option value="Онлайн Ассистент">Онлайн Ассистент</option>
        <option value="Чат с Отелем" selected>Чат с Отелем</option>
        <option value="Свяжитесь с Нами">Свяжитесь с Нами</option>
        <option value="Связь">Связь</option>
        <option value="Поддержка 24/7">Поддержка 24/7</option>
        <option value="Консультант">Консультант</option>
        <option value="Вопрос?">Вопрос?</option>
        <option value="Онлайн-Помощь">Онлайн-Помощь</option>
        <option value="Забронировать Номер">Забронировать Номер</option>
        <option value="Уточнить Детали">Уточнить Детали</option>
        <option value="Спросить Roomie">Спросить Roomie</option>
        <option value="Help">Help</option>
        <option value="Чат">Чат</option>
        <option value="Спросить">Спросить</option>
      </select>
    </div>

    <div class="admin-control">
      <span class="admin-label">Powered by</span>
      <div class="flex items-center justify-between">
        <span class="text-sm text-gray-600">Показать</span>
        <label class="switch"><input type="checkbox" id="branding-toggle" checked><span class="slider"></span></label>
      </div>
    </div>

    <div class="admin-control">
      <span class="admin-label">Telegram</span>
      <div class="flex items-center justify-between">
        <span class="text-sm text-gray-600">Показувати</span>
        <label class="switch"><input type="checkbox" id="tg-toggle" checked><span class="slider"></span></label>
      </div>
    </div>

    <div class="admin-control">
      <span class="admin-label">Анимация кнопки</span>
      <div class="flex items-center justify-between">
        <span class="text-sm text-gray-600">Включена</span>
        <label class="switch"><input type="checkbox" id="animation-toggle" checked><span class="slider"></span></label>
      </div>
    </div>

    <div class="admin-control">
      <span class="admin-label">Темна тема</span>
      <div class="flex items-center justify-between">
        <span class="text-sm text-gray-600">Увімкнути</span>
        <label class="switch"><input type="checkbox" id="theme-toggle"><span class="slider"></span></label>
      </div>
    </div>

    <hr class="border-gray-200 my-4">

    <!-- Operator Mode Section -->
    <div class="admin-control">
      <span class="admin-label">
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline mr-1">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        Режим оператора
      </span>
      <div class="flex items-center justify-between">
        <span class="text-sm text-gray-600">Імітація оператора</span>
        <label class="switch"><input type="checkbox" id="operator-mode-toggle"><span class="slider"></span></label>
      </div>
    </div>

    <div id="operator-settings" class="operator-settings hidden">
      <div class="admin-control">
        <span class="admin-label text-xs">Ім'я оператора</span>
        <input type="text" id="operator-name-input" class="admin-input" placeholder="Ім'я оператора" value="Денис">
      </div>
      <div class="admin-control">
        <span class="admin-label text-xs">Фото оператора</span>
        <label class="file-upload-btn">
          Обрати фото
          <input type="file" id="operator-photo-input" accept="image/*" style="display: none;">
        </label>
        <div id="operator-photo-preview" class="operator-photo-preview mt-2"></div>
      </div>
    </div>

    <hr class="border-gray-200 my-3">

    <!-- Guest Guide Section -->
    <div class="admin-control">
      <span class="admin-label">
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="1" class="inline mr-1">
          <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
        </svg>
        Guest Guide
      </span>
      <div class="flex items-center justify-between">
        <span class="text-sm text-gray-600">Показувати</span>
        <label class="switch">
          <input type="checkbox" id="guide-toggle" checked>
          <span class="slider"></span>
        </label>
      </div>
    </div>

    <div id="guide-admin-settings" class="mt-2">
      <div class="admin-control">
        <span class="admin-label text-xs">Елементи гайду</span>
        <div id="guide-items-admin" class="guide-items-admin space-y-2">
          <!-- Guide items will be rendered here -->
        </div>
        <button id="add-guide-item-btn" class="add-room-btn mt-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Додати елемент
        </button>
      </div>
    </div>

    <!-- Rooms Section -->
    <div class="rooms-section">
      <div class="rooms-section-header">
        <span class="rooms-section-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          Номери
        </span>
        <button id="add-room-btn" class="add-room-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Додати
        </button>
      </div>
      <div id="rooms-admin-grid" class="rooms-admin-grid">
        <!-- Rooms will be rendered here -->
      </div>
    </div>

    <!-- Services Section -->
    <div class="services-section">
      <div class="services-section-header">
        <span class="services-section-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path
              d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
            </path>
          </svg>
          Додаткові послуги
        </span>
        <button id="add-service-btn" class="add-service-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Додати
        </button>
      </div>
      <div id="services-admin-grid" class="services-admin-grid">
        <!-- Services will be rendered here -->
      </div>
    </div>

    <!-- Bookings Section -->
    <div class="bookings-section">
      <div class="bookings-section-header">
        <span class="bookings-section-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          Бронювання
        </span>
        <div class="bookings-controls">
          <button id="generate-test-bookings-btn" class="add-room-btn" title="Згенерувати тестові дані">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
            </svg>
            Тестові
          </button>
        </div>
      </div>

      <!-- Search Bar -->
      <div class="bookings-search">
        <input type="text" id="booking-search-input" class="admin-input" placeholder="Пошук за ПІБ...">
      </div>

      <!-- Stats -->
      <div class="bookings-stats">
        <div class="booking-stat">
          <span class="stat-label">Всього:</span>
          <span id="stat-total" class="stat-value">0</span>
        </div>
        <div class="booking-stat">
          <span class="stat-label">Активні:</span>
          <span id="stat-active" class="stat-value">0</span>
        </div>
        <div class="booking-stat">
          <span class="stat-label">Скасовані:</span>
          <span id="stat-cancelled" class="stat-value">0</span>
        </div>
      </div>

      <!-- Bookings List -->
      <div id="bookings-list" class="bookings-list">
        <!-- Bookings will be rendered here -->
      </div>
    </div>
  </div>

  <!-- WIDGET BUTTON -->
  <button id="chat-widget-button" class="shape-pill" aria-label="Відкрити чат">
    <div id="widget-icon-container">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
    </div>
    <span class="chat-button-text">Чат с отелем</span>
    <span id="chat-notification-badge">1</span>
  </button>

  <!-- CHAT WINDOW -->
  <div id="chat-window">
    <!-- Floating Header Wrapper with Gradient Blur -->
    <div class="chat-header-wrapper">
      <!-- Unified Header Bar -->
      <div class="chat-header-unified accent-bg text-white shadow-lg rounded-full">
        <!-- Block 1: Identity (Logo + Name) -->
        <div class="header-identity flex items-center gap-3">
          <div class="relative">
            <div id="hotel-logo-container"
              class="w-10 h-10 rounded-full bg-white accent-text flex items-center justify-center shadow-sm overflow-hidden">
              <span class="text-xl font-bold accent-text">H</span>
            </div>
            <div id="online-indicator" class="absolute bottom-0 right-0 w-[12px] h-[12px] bg-green-400 border-2 accent-border rounded-full"
              title="Онлайн"></div>
          </div>
          <div>
            <h3 id="hotel-name-text" class="text-base font-bold leading-tight tracking-wide">Hilton</h3>
          </div>
        </div>

        <!-- Divider -->
        <div class="header-divider"></div>

        <!-- Guide Badge (integrated) -->
        <button id="guide-badge-btn" class="header-guide-btn" title="Guest Guide">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="1">
            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" stroke-linejoin="round"/>
          </svg>
          <span>Guide</span>
        </button>

        <!-- Status Pill (Special Booking / Operator Mode) -->
        <div id="header-status-pill" class="header-status-pill hidden">
          <div class="header-status-spinner"></div>
          <span class="header-status-text">Загрузка...</span>
        </div>

        <!-- Divider -->
        <div class="header-divider"></div>

        <!-- Block 2: Controls (Menu + Close) -->
        <div class="header-controls flex items-center gap-1">
          <!-- Header Menu (Hamburger) -->
          <button id="header-menu-btn"
            class="p-2 rounded-full hover:bg-white/20 transition text-white/90 hover:text-white" title="Меню">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
          </button>
          <button id="chat-close-button"
            class="text-white/80 hover:text-white hover:bg-white/10 rounded-full p-2 transition ml-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Room Context Container (Fixed) -->
    <div id="room-context-container" class="hidden"></div>

    <!-- Special Booking Status Container -->
    <div id="special-booking-status" class="special-booking-status hidden">
      <div class="status-indicator">
        <div class="mini-loader"></div>
        <span class="status-text">Проверяем доступность номеров…</span>
      </div>
      <button id="cancel-special-booking-btn" class="cancel-special-btn" title="Отменить">stop</button>
    </div>

    <!-- Operator Mode Status Container -->
    <div id="operator-status-bar" class="operator-status-bar hidden">
      <div class="status-indicator">
        <div class="operator-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </div>
        <div class="operator-status-spinner"></div>
        <span class="operator-status-text">Ищем специалиста...</span>
      </div>
    </div>

    <!-- Messages Container -->
    <div id="chat-messages" class="flex-1 p-4 overflow-y-auto flex flex-col bg-white relative">
      <div id="typing-indicator" class="hidden" aria-hidden="true">
        <div class="typing-indicator-bubble">
          <span></span><span></span><span></span>
        </div>
      </div>
    </div>

    <!-- Room Detail View -->
    <div id="room-detail-view" class="room-detail-view">
      <div class="room-detail-header">
        <button id="room-detail-back" class="room-detail-back">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span class="room-detail-title">Деталі номера</span>
      </div>
      <div class="room-detail-content">
        <img id="room-detail-image" class="room-detail-image" src="" alt="Room photo">
        <div class="room-detail-info">
          <h2 id="room-detail-name" class="room-detail-name"></h2>
          <div class="room-detail-meta">
            <span id="room-detail-area" class="room-detail-meta-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              </svg>
              <span></span>
            </span>
          </div>
          <div class="room-detail-price">
            <span id="room-detail-price-value"></span>
            <span>/ ніч</span>
          </div>
        </div>
      </div>
      <div class="room-detail-actions">
        <button id="room-ask-question-btn" class="room-action-btn room-action-btn-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
          Задати питання
        </button>
        <button id="room-view-photos-btn" class="room-action-btn room-action-btn-secondary">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <circle cx="8.5" cy="8.5" r="1.5"></circle>
            <polyline points="21 15 16 10 5 21"></polyline>
          </svg>
          Переглянути фото
        </button>
      </div>
    </div>


    <!-- Scroll to Bottom Button -->
    <button id="scroll-to-bottom-btn" aria-label="Прокрутити вниз" title="До нових повідомлень">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </button>

    <!-- History View (Internal) -->
    <div id="history-view" class="hidden absolute inset-0 z-[60] bg-white flex flex-col animate-fade-in">
      <div
        class="history-header p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50 flex-shrink-0">
        <h3 class="font-bold text-lg text-gray-800">Історія діалогів</h3>
        <button id="history-close-btn" class="p-2 rounded-full hover:bg-gray-200 transition text-gray-500">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div id="history-list" class="flex-1 overflow-y-auto p-4 flex flex-col gap-3 bg-white">
        <!-- History items will be injected here -->
        <div class="text-center text-gray-400 mt-10">
          <p>Немає збережених діалогів</p>
        </div>
      </div>
    </div>

    <!-- History Detail View (Internal Overlay) -->
    <div id="history-detail-view" class="hidden absolute inset-0 z-[70] bg-white flex flex-col animate-slide-in-right">
      <div class="p-4 border-b border-gray-100 flex items-center justify-between bg-gray-50 shadow-sm flex-shrink-0">
        <div class="flex items-center gap-2">
          <button id="history-detail-back" class="p-2 -ml-2 rounded-full hover:bg-gray-200 transition text-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </button>
          <div>
            <h3 id="history-detail-date" class="font-bold text-gray-800 text-sm"></h3>
            <p id="history-detail-time" class="text-xs text-gray-500"></p>
          </div>
        </div>
      </div>
      <div id="history-detail-messages" class="flex-1 p-4 overflow-y-auto flex flex-col bg-gray-50">
        <!-- Messages will be injected here -->
      </div>
    </div>

    <!-- Reset Confirmation Modal -->
    <div id="reset-confirmation-modal"
      class="hidden absolute inset-0 z-50 flex items-end justify-center bg-black/40 backdrop-blur-sm transition-all p-4 pb-6">
      <div
        class="modal-content bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl transform scale-100 transition-all text-center animate-slide-up">
        <h4 class="text-lg font-bold mb-6">Розпочати новий чат?</h4>
        <div class="flex flex-col gap-2">
          <button id="confirm-reset-btn"
            class="w-full py-2.5 bg-red-500 hover:bg-red-600 text-white font-medium rounded-xl transition-colors shadow-sm flex items-center justify-center gap-2">
            <span>Розпочати</span>
          </button>
          <button id="cancel-reset-btn"
            class="modal-btn-cancel w-full py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-xl transition-colors">Скасувати</button>
        </div>
      </div>
    </div>

    <!-- Telegram Confirmation Modal -->
    <div id="tg-confirmation-modal"
      class="hidden absolute inset-0 z-50 flex items-end justify-center bg-black/40 backdrop-blur-sm transition-all p-4 pb-6">
      <div
        class="modal-content bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl transform scale-100 transition-all text-center animate-slide-up">
        <div class="mx-auto w-12 h-12 flex items-center justify-center mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12" viewBox="0 0 240.1 240.1">
            <linearGradient id="Oval_1_modal" gradientUnits="userSpaceOnUse" x1="-838.041" y1="660.581" x2="-838.041"
              y2="660.3427" gradientTransform="matrix(1000 0 0 -1000 838161 660581)">
              <stop offset="0" style="stop-color:#2AABEE" />
              <stop offset="1" style="stop-color:#229ED9" />
            </linearGradient>
            <circle fill-rule="evenodd" clip-rule="evenodd" fill="url(#Oval_1_modal)" cx="120.1" cy="120.1" r="120.1" />
            <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF"
              d="M54.3,118.8c35-15.2,58.3-25.3,70-30.2 c33.3-13.9,40.3-16.3,44.8-16.4c1,0,3.2,0.2,4.7,1.4c1.2,1,1.5,2.3,1.7,3.3s0.4,3.1,0.2,4.7c-1.8,19-9.6,65.1-13.6,86.3 c-1.7,9-5,12-8.2,12.3c-7,0.6-12.3-4.6-19-9c-10.6-6.9-16.5-11.2-26.8-18c-11.9-7.8-4.2-12.1,2.6-19.1c1.8-1.8,32.5-29.8,33.1-32.3 c0.1-0.3,0.1-1.5-0.6-2.1c-0.7-0.6-1.7-0.4-2.5-0.2c-1.1,0.2-17.9,11.4-50.6,33.5c-4.8,3.3-9.1,4.9-13,4.8 c-4.3-0.1-12.5-2.4-18.7-4.4c-7.5-2.4-13.5-3.7-13-7.9C45.7,123.3,48.7,121.1,54.3,118.8z" />
          </svg>
        </div>
        <h4 class="text-lg font-bold mb-2">Бажаєте перейти?</h4>
        <p class="modal-text-secondary text-sm text-gray-500 mb-6">Ви будете перенаправлені у зовнішній додаток.</p>
        <div class="flex flex-col gap-2">
          <button id="confirm-tg-btn"
            class="w-full py-2.5 bg-[#24A1DE] hover:bg-[#1e88bd] text-white font-medium rounded-xl transition-colors shadow-sm flex items-center justify-center gap-2">
            <span>Перейти</span>
          </button>
          <button id="cancel-tg-btn"
            class="modal-btn-cancel w-full py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-xl transition-colors">Скасувати</button>
        </div>
      </div>
    </div>

    <!-- Special Offer Card -->
    <div id="special-offer-card" class="special-offer-card hidden">
      <div class="offer-header">
        <div class="offer-header-content">
          <span class="offer-badge">Персональное предложение</span>
          <span class="offer-subtitle">Подобрано специально для вас</span>
        </div>
        <span class="offer-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon
              points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
            </polygon>
          </svg>
        </span>
      </div>
      <div class="offer-content">
        <div class="offer-room">
          <div class="offer-room-image-container">
            <img id="offer-room-image" class="offer-room-image" src="" alt="">
            <div class="offer-room-image-placeholder">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
            </div>
          </div>
          <div class="offer-room-info">
            <h3 id="offer-room-name" class="offer-room-name"></h3>
            <p id="offer-room-price" class="offer-room-price"></p>
          </div>
        </div>
        <div class="offer-details">
          <div class="offer-detail-item">
            <span class="detail-label">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
              Даты
            </span>
            <span id="offer-dates" class="detail-value"></span>
          </div>
          <div class="offer-detail-item">
            <span class="detail-label">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              Гости
            </span>
            <span id="offer-guests" class="detail-value"></span>
          </div>
          <div class="offer-detail-item offer-total">
            <span class="detail-label">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
              Итого
            </span>
            <span id="offer-total" class="detail-value total-value"></span>
          </div>
          <div class="offer-special-notes">
            <span class="notes-label">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 11 12 14 22 4"></polyline>
                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
              </svg>
              Учтённые пожелания
            </span>
            <ul id="offer-notes-list" class="notes-list"></ul>
          </div>
        </div>
      </div>
      <div class="offer-actions">
        <button id="offer-confirm-btn" class="offer-btn primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Подтвердить бронирование
        </button>
        <button id="offer-edit-btn" class="offer-btn secondary">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
          </svg>
          Изменить детали
        </button>
      </div>
    </div>

    <!-- Footer -->
    <!-- Footer -->
    <footer id="chat-footer"
      class="border-t-0 bg-transparent flex-shrink-0 flex flex-col relative z-20 transition-all mb-3 mx-3 gap-2">
      <!-- Telegram Banner -->
      <a href="javascript:void(0)" id="telegram-banner" class="contact-banner shadow-lg rounded-2xl bg-white mb-2 mx-0">
        <div class="banner-icon-wrapper flex items-center justify-center overflow-hidden">
          <svg class="main-icon w-full h-full scale-110" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240.1 240.1">
            <linearGradient id="Oval_1_" gradientUnits="userSpaceOnUse" x1="-838.041" y1="660.581" x2="-838.041"
              y2="660.3427" gradientTransform="matrix(1000 0 0 -1000 838161 660581)">
              <stop offset="0" style="stop-color:#2AABEE" />
              <stop offset="1" style="stop-color:#229ED9" />
            </linearGradient>
            <circle fill-rule="evenodd" clip-rule="evenodd" fill="url(#Oval_1_)" cx="120.1" cy="120.1" r="120.1" />
            <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF"
              d="M54.3,118.8c35-15.2,58.3-25.3,70-30.2 c33.3-13.9,40.3-16.3,44.8-16.4c1,0,3.2,0.2,4.7,1.4c1.2,1,1.5,2.3,1.7,3.3s0.4,3.1,0.2,4.7c-1.8,19-9.6,65.1-13.6,86.3 c-1.7,9-5,12-8.2,12.3c-7,0.6-12.3-4.6-19-9c-10.6-6.9-16.5-11.2-26.8-18c-11.9-7.8-4.2-12.1,2.6-19.1c1.8-1.8,32.5-29.8,33.1-32.3 c0.1-0.3,0.1-1.5-0.6-2.1c-0.7-0.6-1.7-0.4-2.5-0.2c-1.1,0.2-17.9,11.4-50.6,33.5c-4.8,3.3-9.1,4.9-13,4.8 c-4.3-0.1-12.5-2.4-18.7-4.4c-7.5-2.4-13.5-3.7-13-7.9C45.7,123.3,48.7,121.1,54.3,118.8z" />
          </svg>
        </div>
        <div class="banner-content">
          <span class="banner-title">Перейти в Telegram</span>
          <span class="banner-subtitle">Швидше і зручніше</span>
        </div>
        <svg class="expand-arrow" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
        <button class="close-banner-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </a>

      <!-- Input Area -->
      <div id="input-area-wrapper" class="px-0 pb-0 pt-0">
        <div class="input-container-bg shadow-lg bg-white">
          <textarea id="message-input" rows="1" placeholder="Введите сообщение..." autocomplete="off"></textarea>
          <button id="send-button" title="Надіслати">
            <svg id="btn-icon-send" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" y1="19" x2="12" y2="5"></line>
              <polyline points="5 12 12 5 19 12"></polyline>
            </svg>
            <div class="spinner"></div>
          </button>
        </div>
      </div>

      <!-- Powered By -->
      <div id="powered-by-container"
        class="text-center pb-0 pt-0 bg-white/80 backdrop-blur-sm rounded-full self-center px-4 py-1 shadow-sm mt-1">
        <span class="text-sm text-gray-400 font-medium">powered by <a href="https://hotelmol.com" target="_blank"
            class="accent-text hover:underline cursor-pointer">hotelmol.com</a></span>
      </div>
    </footer>

    <!-- Welcome Modal -->
    <div id="welcome-modal"
      class="welcome-modal hidden absolute inset-0 z-50 flex items-end justify-center bg-black/40 backdrop-blur-sm transition-all p-4 pb-6">
      <div
        class="welcome-content bg-white rounded-2xl p-6 w-full shadow-2xl transform scale-100 transition-all text-center animate-slide-up">
        <div class="welcome-header mb-4">
          <div class="welcome-logo mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4">
            <span class="text-2xl font-bold accent-text">H</span>
          </div>
          <h2 class="welcome-title text-xl font-bold text-gray-900 mb-2">Привет! Я Roomie,<br>твой ИИ-консьерж в Hilton
          </h2>
        </div>
        <div class="welcome-body mb-6">
          <p class="welcome-text text-sm text-gray-600 mb-4 leading-relaxed">
            Нажимая кнопку «Начать», вы принимаете наши <a href="#" class="legal-link text-blue-600 hover:underline"
              data-url="https://roomie.user-agreement.hotelmol.com/">Условия использования</a> и <a href="#"
              class="legal-link text-blue-600 hover:underline"
              data-url="https://roomie.privacy-policy.hotelmol.com/">Политику конфиденциальности</a>,
            а также соглашаетесь получать от нас полезную информацию о своем проживании и спецпредложениях отеля.
          </p>
          <p class="welcome-text-small text-xs text-gray-400">
            Ты можешь в любой момент удалить все свои данные, просто написав на почту <a
              href="mailto:legal@hotelmol.com" class="text-gray-500 hover:underline">legal@hotelmol.com</a>
          </p>
        </div>
        <div class="welcome-footer">
          <button id="welcome-start-btn"
            class="w-full py-3 bg-[#2563eb] hover:bg-[#1d4ed8] text-white font-semibold rounded-xl transition-colors shadow-md text-base">
            Начать работу
          </button>
        </div>
      </div>
    </div>

    <!-- Legal Modal (Iframe) -->
    <div id="legal-modal" class="legal-modal hidden">
      <div class="legal-header">
        <button id="legal-back-btn" class="legal-back-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
          Назад
        </button>
        <span class="legal-title">Документ</span>
      </div>
      <div class="legal-content">
        <iframe id="legal-iframe" src="" frameborder="0"></iframe>
      </div>
    </div>

    <!-- Menu Bottom Sheet Modal -->
    <div id="menu-bottom-sheet"
      class="hidden absolute inset-0 z-50 flex items-end justify-center bg-black/40 backdrop-blur-sm transition-all">
      <div
        class="menu-sheet-content bg-white w-full rounded-t-2xl p-4 pb-8 shadow-2xl transform translate-y-full transition-transform duration-300 ease-out">
        <div class="flex justify-center mb-4">
          <div class="w-12 h-1.5 bg-gray-200 rounded-full"></div>
        </div>

        <div class="grid grid-cols-1 gap-2">
          <button id="reset-chat-btn" class="menu-sheet-btn">
            <div class="p-2 bg-blue-50 text-blue-600 rounded-full mr-3">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                <line x1="9" y1="10" x2="15" y2="10"></line>
                <line x1="12" y1="7" x2="12" y2="13"></line>
              </svg>
            </div>
            <span class="flex-1 text-left font-medium text-gray-700" data-i18n="newChat">New Chat</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              class="text-gray-400" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>

          <!-- Rooms Button -->
          <button id="rooms-menu-btn" class="menu-sheet-btn">
            <div class="p-2 bg-purple-50 text-purple-600 rounded-full mr-3">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
            </div>
            <span class="flex-1 text-left font-medium text-gray-700">Номери</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              class="text-gray-400" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>

          <button id="special-booking-btn" class="menu-sheet-btn">
            <div class="p-2 rounded-full mr-3 special-booking-icon-frame">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962l6.135-1.582a2 2 0 0 0 1.437-1.437l1.582-6.135a.5.5 0 0 1 .963 0l1.582 6.135a2 2 0 0 0 1.437 1.437l6.135 1.582a.5.5 0 0 1 0 .962l-6.135 1.582a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z" />
                <path d="M20 3v4" />
                <path d="M22 5h-4" />
                <path d="M4 17v2" />
                <path d="M5 18H3" />
              </svg>
            </div>
            <span class="flex-1 text-left font-medium text-gray-700" data-i18n="specialBooking">Special
              Booking</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              class="text-gray-400" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>

          <button id="history-menu-btn" class="menu-sheet-btn">
            <div class="p-2 bg-orange-50 text-orange-500 rounded-full mr-3">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="21 8 21 21 3 21 3 8"></polyline>
                <rect x="1" y="3" width="22" height="5"></rect>
                <line x1="10" y1="12" x2="14" y2="12"></line>
              </svg>
            </div>
            <span class="flex-1 text-left font-medium text-gray-700">Previous Dialogs</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              class="text-gray-400" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>

          <!-- Sound Toggle Button -->
          <button id="sound-toggle-btn" class="menu-sheet-btn">
            <div class="p-2 bg-indigo-50 text-indigo-600 rounded-full mr-3">
              <svg id="sound-icon-on" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
              </svg>
              <svg id="sound-icon-off" class="hidden" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <line x1="23" y1="9" x2="17" y2="15"></line>
                <line x1="17" y1="9" x2="23" y2="15"></line>
              </svg>
            </div>
            <span class="flex-1 text-left font-medium text-gray-700">Звук сповіщень</span>
            <span id="sound-status-text" class="text-sm text-gray-400 mr-2">Вкл</span>
          </button>

          <button id="language-menu-btn" class="menu-sheet-btn">
            <div class="p-2 bg-green-50 text-green-600 rounded-full mr-3">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m5 8 6 6" />
                <path d="m4 14 6-6 2-3" />
                <path d="M2 5h12" />
                <path d="M7 2h1" />
                <path d="m22 22-5-10-5 10" />
                <path d="M14 14h6" />
              </svg>
            </div>
            <span class="flex-1 text-left font-medium text-gray-700" data-i18n="language">Language</span>
            <span id="current-lang-display" class="text-sm text-gray-400 mr-2 uppercase">EN</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              class="text-gray-400" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
        </div>

        <button id="menu-sheet-close"
          class="mt-6 w-full py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-xl transition-colors">
          Закрыть
        </button>
      </div>

      <!-- Language Submenu Modal (Nested) -->
      <div id="language-sheet-modal"
        class="hidden absolute inset-0 z-[60] flex items-end justify-center bg-black/40 backdrop-blur-sm">
        <div class="bg-white w-full rounded-t-2xl p-4 pb-8 shadow-2xl animate-slide-up flex flex-col">
          <div class="flex items-center justify-between mb-4 border-b pb-2">
            <h3 class="font-bold text-lg">Выберите язык</h3>
            <button id="language-sheet-close" class="p-2 bg-gray-100 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
          <div id="language-sheet-list" class="flex-1 overflow-y-auto space-y-2">
            <!-- Languages injected here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Guide Bottom Sheet Modal -->
    <div id="guide-bottom-sheet" class="hidden absolute inset-0 z-50 flex items-end justify-center bg-black/40 backdrop-blur-sm transition-all">
      <div class="guide-sheet-content bg-white w-full rounded-t-2xl p-4 pb-8 shadow-2xl transform translate-y-full transition-transform duration-300 ease-out">
        <div class="flex justify-center mb-4">
          <div class="w-12 h-1.5 bg-gray-200 rounded-full"></div>
        </div>

        <h3 class="text-center text-lg font-bold text-gray-800 mb-2">персональная карточка гостя</h3>

        <div id="guide-items-list" class="guide-items-list mb-4">
          <!-- Guide items will be populated here -->
        </div>

        <button id="guide-telegram-btn" class="guide-telegram-btn">
          <svg width="24" height="24" viewBox="0 0 240.1 240.1" fill="white">
            <path d="M82.9,178.9c-3.4,0-2.9-1.3-4.1-4.5L66.1,129l113.6-67.5"/>
            <path d="M82.9,178.9c2.6,0,3.8-1.2,5.2-2.6l14-13.6l-29.2-17.6"/>
            <path d="M72.9,145.1l70.8,52.2c8.1,4.5,13.9,2.1,15.9-7.5l28.8-135.8c2.9-11.8-4.5-17.1-12.2-13.6L38.6,108.2c-11.5,4.6-11.5,11-2.1,13.9l43.4,13.6l100.5-63.4c4.7-2.9,9.1-1.3,5.5,1.8"/>
          </svg>
          <span>Получить в Telegram</span>
        </button>

        <button id="guide-sheet-close" class="mt-3 w-full py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-xl transition-colors">
          Закрыть
        </button>
      </div>
    </div>

    <!-- Telegram Booking Confirmation Modal -->
    <div id="telegram-booking-modal" class="telegram-confirmation-overlay">
      <div class="telegram-confirmation-modal">
        <button class="telegram-modal-close" id="telegram-booking-close" aria-label="Закрыть">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>

        <div class="telegram-logo-container">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240.1 240.1">
            <linearGradient id="telegram_gradient" gradientUnits="userSpaceOnUse" x1="-838.041" y1="660.581"
              x2="-838.041" y2="660.3427" gradientTransform="matrix(1000 0 0 -1000 838161 660581)">
              <stop offset="0" style="stop-color:#2AABEE" />
              <stop offset="1" style="stop-color:#229ED9" />
            </linearGradient>
            <circle fill-rule="evenodd" clip-rule="evenodd" fill="url(#telegram_gradient)" cx="120.1" cy="120.1"
              r="120.1" />
            <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF"
              d="M54.3,118.8c35-15.2,58.3-25.3,70-30.2 c33.3-13.9,40.3-16.3,44.8-16.4c1,0,3.2,0.2,4.7,1.4c1.2,1,1.5,2.3,1.7,3.3s0.4,3.1,0.2,4.7c-1.8,19-9.6,65.1-13.6,86.3 c-1.7,9-5,12-8.2,12.3c-7,0.6-12.3-4.6-19-9c-10.6-6.9-16.5-11.2-26.8-18c-11.9-7.8-4.2-12.1,2.6-19.1c1.8-1.8,32.5-29.8,33.1-32.3 c0.1-0.3,0.1-1.5-0.6-2.1c-0.7-0.6-1.7-0.4-2.5-0.2c-1.1,0.2-17.9,11.4-50.6,33.5c-4.8,3.3-9.1,4.9-13,4.8 c-4.3-0.1-12.5-2.4-18.7-4.4c-7.5-2.4-13.5-3.7-13-7.9C45.7,123.3,48.7,121.1,54.3,118.8z" />
          </svg>

          <div class="telegram-success-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
          </div>
        </div>

        <h2 class="telegram-modal-title">Бронирование завершено!</h2>
        <p class="telegram-modal-subtitle">Перейдите в Telegram чтобы получить подтверждение о вашем бронировании</p>

        <button class="telegram-confirm-button" id="telegram-booking-confirm">
          <svg class="telegram-button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69.01-.03.01-.14-.07-.2-.08-.06-.2-.04-.28-.02-.12.02-1.98 1.26-5.59 3.7-.53.37-.1.02-1.44.38-.67.19-1.19.3-1.14.65.03.19.21.38 1.48.68 1.05.27 2.44.58 3.18.68.64.08 1.35-.06 1.74-.2 1.16-.38 3.31-1.32 3.36-1.34.03-.02.1-.03.17-.03.13 0 .23.08.23.19z" />
          </svg>
          Перейти в Telegram
        </button>

        <button class="telegram-later-button" id="telegram-booking-later">Позже</button>
      </div>
    </div>
  </div>

  <!-- Room Edit Modal -->
  <div id="room-modal-overlay" class="room-modal-overlay">
    <div class="room-modal">
      <div class="room-modal-header">
        <h3 id="room-modal-title" class="room-modal-title">Новий номер</h3>
        <button id="room-modal-close" class="room-modal-close">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="room-modal-body">
        <input type="hidden" id="room-edit-id">

        <div class="room-form-group">
          <label class="room-form-label">Назва номера</label>
          <input type="text" id="room-name-input" class="room-form-input" placeholder="Наприклад: Люкс Панорама">
        </div>

        <div class="room-form-group">
          <label class="room-form-label">Опис</label>
          <textarea id="room-description-input" class="room-form-textarea"
            placeholder="Детальний опис номера..."></textarea>
        </div>

        <div class="room-form-row">
          <div class="room-form-group">
            <label class="room-form-label">Площа (м²)</label>
            <input type="number" id="room-area-input" class="room-form-input" placeholder="45" min="1">
          </div>
          <div class="room-form-group">
            <label class="room-form-label">Ціна за ніч ($)</label>
            <input type="number" id="room-price-input" class="room-form-input" placeholder="150" min="1">
          </div>
        </div>

        <div class="room-form-group">
          <label class="room-form-label">Заглавне фото</label>
          <div id="main-photo-upload" class="photo-upload-area">
            <div class="photo-upload-placeholder">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
              <span>Натисніть для завантаження</span>
            </div>
          </div>
          <input type="file" id="main-photo-input" accept="image/*" style="display: none;">
        </div>

        <div class="room-form-group">
          <label class="room-form-label">Галерея фото</label>
          <div id="gallery-upload-grid" class="gallery-upload-grid">
            <div id="gallery-add-btn" class="gallery-add-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              <span>Додати</span>
            </div>
          </div>
          <input type="file" id="gallery-photo-input" accept="image/*" multiple style="display: none;">
        </div>

        <div class="room-toggle-group">
          <span class="room-toggle-label">Кнопка "Задати питання"</span>
          <label class="switch">
            <input type="checkbox" id="room-ask-toggle" checked>
            <span class="slider"></span>
          </label>
        </div>

        <!-- Marketing Section -->
        <div class="room-form-section-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <polygon
              points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
            </polygon>
          </svg>
          Маркетинг
        </div>

        <div class="room-form-group">
          <label class="room-form-label">Бейдж</label>
          <select id="room-badge-input" class="room-form-select">
            <option value="">Без бейджа</option>
            <option value="popular">Most Popular</option>
            <option value="new">New</option>
            <option value="limited">Limited</option>
            <option value="recommended">Recommended</option>
            <option value="bestseller">Bestseller</option>
          </select>
        </div>

        <div class="room-form-group">
          <label class="room-form-label">Залишилось номерів (0 = не показувати)</label>
          <input type="number" id="room-left-count-input" class="room-form-input" placeholder="0" min="0" max="99">
        </div>

        <div class="room-form-row">
          <div class="room-form-group">
            <label class="room-form-label">Знижка (%)</label>
            <input type="number" id="room-discount-input" class="room-form-input" placeholder="0" min="0" max="99">
          </div>
          <div class="room-form-group">
            <label class="room-form-label">Стара ціна ($)</label>
            <input type="number" id="room-original-price-input" class="room-form-input" placeholder="0" min="0">
          </div>
        </div>

        <!-- Reviews Section -->
        <div class="room-form-section-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <path
              d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
            </path>
          </svg>
          Відгуки
        </div>

        <div class="room-form-group">
          <div id="room-reviews-list" class="reviews-list">
            <!-- Reviews will be rendered here -->
          </div>

          <div class="add-review-form">
            <div class="room-form-label">Додати відгук</div>
            <div class="review-inputs-row">
              <input type="text" id="room-review-author" class="room-form-input" placeholder="Ім'я гостя">
              <select id="room-review-rating" class="room-form-select" style="width: 80px;">
                <option value="5">5 ★</option>
                <option value="4">4 ★</option>
                <option value="3">3 ★</option>
                <option value="2">2 ★</option>
                <option value="1">1 ★</option>
              </select>
              <input type="date" id="room-review-date" class="room-form-input" style="width: 130px;">
            </div>
            <textarea id="room-review-text" class="room-form-textarea" placeholder="Текст відгуку..." rows="2"
              style="margin-top: 8px;"></textarea>
            <button type="button" id="room-add-review-btn" class="room-btn room-btn-secondary"
              style="margin-top: 8px; width: 100%;">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              Додати відгук
            </button>
          </div>
        </div>

        <!-- Calendar Section -->
        <div class="room-form-group">
          <label class="room-form-label">Календарь доступности</label>
          <div class="calendar-controls">
            <button type="button" id="calendar-prev-month" class="calendar-nav-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
            </button>
            <span id="calendar-month-label" class="calendar-month-label">Январь 2026</span>
            <button type="button" id="calendar-next-month" class="calendar-nav-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </button>
            <button type="button" id="calendar-generate-random"
              class="room-btn room-btn-secondary calendar-generate-btn">
              Сгенерировать
            </button>
          </div>
          <div class="calendar-weekdays">
            <span>Пн</span><span>Вт</span><span>Ср</span><span>Чт</span><span>Пт</span><span>Сб</span><span>Вс</span>
          </div>
          <div id="room-calendar" class="room-calendar-grid"></div>
          <div class="calendar-legend">
            <span class="legend-item legend-available"><span class="legend-dot"></span>Свободно</span>
            <span class="legend-item legend-booked"><span class="legend-dot"></span>Занято</span>
          </div>
        </div>
      </div>
      <div class="room-modal-footer">
        <button id="room-delete-btn" class="room-btn room-btn-danger" style="display: none;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 6h18"></path>
            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
          </svg>
        </button>
        <button id="room-cancel-btn" class="room-btn room-btn-secondary">Скасувати</button>
        <button id="room-save-btn" class="room-btn room-btn-primary">Зберегти</button>
      </div>
    </div>
  </div>

  <!-- Service Edit Modal -->
  <div id="service-modal-overlay" class="service-modal-overlay">
    <div class="service-modal">
      <div class="service-modal-header">
        <h3 id="service-modal-title" class="service-modal-title">Нова послуга</h3>
        <button id="service-modal-close" class="service-modal-close">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="service-modal-body">
        <input type="hidden" id="service-edit-id">

        <div class="service-form-group">
          <label class="service-form-label">Назва послуги</label>
          <input type="text" id="service-name-input" class="service-form-input" placeholder="Наприклад: SPA масаж">
        </div>

        <div class="service-form-group">
          <label class="service-form-label">Опис</label>
          <textarea id="service-description-input" class="service-form-textarea"
            placeholder="Детальний опис послуги..."></textarea>
        </div>

        <div class="service-form-row">
          <div class="service-form-group">
            <label class="service-form-label">Ціна ($)</label>
            <input type="number" id="service-price-input" class="service-form-input" placeholder="100" min="0">
          </div>
          <div class="service-form-group">
            <label class="service-form-label">Тип ціни</label>
            <select id="service-price-type-input" class="service-form-select">
              <option value="fixed">Фіксована</option>
              <option value="per_hour">За годину</option>
              <option value="per_day">За день</option>
              <option value="on_request">За запитом</option>
            </select>
          </div>
        </div>

        <div class="service-form-group">
          <label class="service-form-label">Категорія</label>
          <select id="service-category-input" class="service-form-select">
            <option value="spa">SPA & Wellness</option>
            <option value="restaurant">Ресторан</option>
            <option value="transport">Трансфер</option>
            <option value="entertainment">Розваги</option>
            <option value="business">Бізнес</option>
            <option value="kids">Для дітей</option>
            <option value="general" selected>Інше</option>
          </select>
        </div>

        <div class="service-form-group">
          <label class="service-form-label">Заглавне фото</label>
          <div id="service-main-photo-upload" class="photo-upload-area">
            <div class="photo-upload-placeholder">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
              <span>Натисніть для завантаження</span>
            </div>
          </div>
          <input type="file" id="service-main-photo-input" accept="image/*" style="display: none;">
        </div>

        <div class="service-form-group">
          <label class="service-form-label">Галерея фото</label>
          <div id="service-gallery-upload-grid" class="service-gallery-upload-grid">
            <div id="service-gallery-add-btn" class="service-gallery-add-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              <span>Додати</span>
            </div>
          </div>
          <input type="file" id="service-gallery-photo-input" accept="image/*" multiple style="display: none;">
        </div>

        <div class="service-toggle-group">
          <span class="service-toggle-label">Кнопка "Задати питання"</span>
          <label class="switch">
            <input type="checkbox" id="service-ask-toggle" checked>
            <span class="slider"></span>
          </label>
        </div>

        <div class="service-toggle-group">
          <span class="service-toggle-label">Кнопка "Додати до бронювання"</span>
          <label class="switch">
            <input type="checkbox" id="service-add-booking-toggle" checked>
            <span class="slider"></span>
          </label>
        </div>

        <!-- Marketing Section -->
        <div class="service-form-section-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <polygon
              points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
            </polygon>
          </svg>
          Маркетинг
        </div>

        <div class="service-form-group">
          <label class="service-form-label">Бейдж</label>
          <select id="service-badge-input" class="service-form-select">
            <option value="">Без бейджа</option>
            <option value="popular">Most Popular</option>
            <option value="new">New</option>
            <option value="limited">Limited</option>
            <option value="recommended">Recommended</option>
            <option value="bestseller">Bestseller</option>
          </select>
        </div>

        <div class="service-form-group">
          <label class="service-form-label">Залишилось місць (0 = не показувати)</label>
          <input type="number" id="service-left-count-input" class="service-form-input" placeholder="0" min="0"
            max="99">
        </div>

        <div class="service-form-row">
          <div class="service-form-group">
            <label class="service-form-label">Знижка (%)</label>
            <input type="number" id="service-discount-input" class="service-form-input" placeholder="0" min="0"
              max="99">
          </div>
          <div class="service-form-group">
            <label class="service-form-label">Стара ціна ($)</label>
            <input type="number" id="service-original-price-input" class="service-form-input" placeholder="0" min="0">
          </div>
        </div>

        <!-- Reviews Section -->
        <div class="service-form-section-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <path
              d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
            </path>
          </svg>
          Відгуки
        </div>

        <div class="service-form-group">
          <div id="service-reviews-list" class="reviews-list">
            <!-- Reviews will be rendered here -->
          </div>

          <div class="add-review-form">
            <div class="service-form-label">Додати відгук</div>
            <div class="review-inputs-row">
              <input type="text" id="service-review-author" class="service-form-input" placeholder="Ім'я гостя">
              <select id="service-review-rating" class="service-form-select" style="width: 80px;">
                <option value="5">5 ★</option>
                <option value="4">4 ★</option>
                <option value="3">3 ★</option>
                <option value="2">2 ★</option>
                <option value="1">1 ★</option>
              </select>
              <input type="date" id="service-review-date" class="service-form-input" style="width: 130px;">
            </div>
            <textarea id="service-review-text" class="service-form-textarea" placeholder="Текст відгуку..." rows="2"
              style="margin-top: 8px;"></textarea>
            <button type="button" id="service-add-review-btn" class="service-btn service-btn-secondary"
              style="margin-top: 8px; width: 100%;">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              Додати відгук
            </button>
          </div>
        </div>
      </div>
      <div class="service-modal-footer">
        <button id="service-delete-btn" class="service-btn service-btn-danger" style="display: none;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 6h18"></path>
            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
          </svg>
        </button>
        <button id="service-cancel-btn" class="service-btn service-btn-secondary">Скасувати</button>
        <button id="service-save-btn" class="service-btn service-btn-primary">Зберегти</button>
      </div>
    </div>
  </div>

  <!-- Item Preview Modal (for Room/Service cards in admin) -->
  <div id="item-preview-overlay" class="item-preview-overlay">
    <div class="item-preview-modal">
      <button class="item-preview-close">&times;</button>
      <div class="item-preview-image">
        <img id="preview-image" src="" alt="">
        <div class="item-preview-no-image">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <circle cx="8.5" cy="8.5" r="1.5"></circle>
            <polyline points="21 15 16 10 5 21"></polyline>
          </svg>
          <span>Немає фото</span>
        </div>
      </div>
      <div class="item-preview-content">
        <h3 id="preview-title"></h3>
        <div id="preview-price" class="item-preview-price"></div>
        <div class="item-preview-description-wrapper">
          <p id="preview-description" class="item-preview-description"></p>
        </div>
        <button id="preview-edit-btn" class="item-preview-edit-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
          </svg>
          Редагувати
        </button>
      </div>
    </div>
  </div>

  <!-- Photo Gallery Overlay -->
  <div id="photo-gallery-overlay" class="photo-gallery-overlay">
    <div class="photo-gallery-header">
      <span id="photo-gallery-counter" class="photo-gallery-counter">1 / 5</span>
      <button id="photo-gallery-close" class="photo-gallery-close">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="photo-gallery-content">
      <button id="photo-gallery-prev" class="photo-gallery-nav prev">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
      <img id="photo-gallery-image" class="photo-gallery-image" src="" alt="Room photo">
      <button id="photo-gallery-next" class="photo-gallery-nav next">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
    </div>
    <div id="photo-gallery-dots" class="photo-gallery-dots"></div>
  </div>





  <!-- Application Scripts -->
  <script type="module" src="js/app.js"></script>

</body>

</html>