/*
 * Liquid Glass Design
 * Desktop Only (> 768px)
 */

@media (min-width: 768px) {

    /* 1. Main Container Override */
    #chat-window {
        width: 400px !important;
        height: 560px !important;
        max-height: 85vh !important;
        border-radius: 30px !important;
        background: linear-gradient(180deg,
                rgba(255, 255, 255, 0.6) 0%,
                rgba(255, 255, 255, 0.3) 100%) !important;
        backdrop-filter: blur(40px) !important;
        -webkit-backdrop-filter: blur(40px) !important;
        border: 1px solid rgba(255, 255, 255, 0.5) !important;
        box-shadow:
            0 25px 80px rgba(0, 0, 0, 0.15),
            0 10px 30px rgba(0, 0, 0, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.7) !important;
        transform-origin: bottom right;
        overflow: hidden;
        /* Reset old transforms handled by JS/CSS combination */
        transform: none;
        opacity: 0;
        pointer-events: none;
        transition: none !important;
        /* Managed by animations */
    }

    /* Cloud Background Layer */
    .clouds-layer {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: -1;
    }

    .cloud {
        position: absolute;
        border-radius: 50%;
        filter: blur(40px);
        opacity: 0.5;
        animation: cloudFloat 20s ease-in-out infinite;
    }

    .cloud-1 {
        width: 200px;
        height: 200px;
        background: radial-gradient(circle, rgba(255, 200, 200, 0.6), transparent);
        top: 10%;
        left: -10%;
        animation-duration: 25s;
    }

    .cloud-2 {
        width: 150px;
        height: 150px;
        background: radial-gradient(circle, rgba(200, 200, 255, 0.6), transparent);
        top: 40%;
        right: -5%;
        animation-duration: 18s;
        animation-delay: -5s;
    }

    .cloud-3 {
        width: 180px;
        height: 180px;
        background: radial-gradient(circle, rgba(200, 255, 220, 0.5), transparent);
        bottom: 20%;
        left: 20%;
        animation-duration: 22s;
        animation-delay: -10s;
    }

    /* 2. Header Style Override */
    #chat-window header {
        background: linear-gradient(135deg,
                rgba(255, 255, 255, 0.5) 0%,
                rgba(255, 255, 255, 0.15) 100%) !important;
        backdrop-filter: blur(30px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.35);
        box-shadow: none !important;
        color: #1f2937 !important;
        /* Dark text for glass header by default */
        padding: 16px !important;
    }

    #chat-window header h3,
    #chat-window header span,
    #chat-window header svg {
        color: #374151 !important;
    }

    /* Buttons in header */
    #header-menu-btn,
    #chat-close-button {
        background: rgba(255, 255, 255, 0.4) !important;
        border-radius: 50%;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8);
        color: #374151 !important;
    }

    #header-menu-btn:hover,
    #chat-close-button:hover {
        background: rgba(255, 255, 255, 0.7) !important;
        transform: scale(1.05);
    }

    /* 3. Messages Override relative to container */
    #chat-messages {
        background: transparent !important;
        /* Reveal clouds */
    }

    /* User Message Bubble */
    .chat-message-user {
        background: linear-gradient(135deg,
                rgba(100, 150, 255, 0.8) 0%,
                rgba(150, 100, 255, 0.7) 100%) !important;
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.4) !important;
        box-shadow: 0 4px 15px rgba(37, 99, 235, 0.2) !important;
        color: white !important;
        border-radius: 18px 18px 4px 18px !important;
    }

    /* AI Message Bubble */
    .chat-message-ai {
        background: linear-gradient(135deg,
                rgba(255, 255, 255, 0.6) 0%,
                rgba(255, 255, 255, 0.4) 100%) !important;
        backdrop-filter: blur(30px);
        border: 1px solid rgba(255, 255, 255, 0.6) !important;
        box-shadow:
            0 4px 10px rgba(0, 0, 0, 0.05),
            inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
        color: #1f2937 !important;
        border-radius: 18px 18px 18px 4px !important;
    }

    /* 4. Input Area Override */
    #chat-footer {
        background: transparent !important;
        border-top: none !important;
        padding-bottom: 16px !important;
    }

    .input-container-bg {
        background: linear-gradient(135deg,
                rgba(255, 255, 255, 0.6) 0%,
                rgba(255, 255, 255, 0.3) 100%) !important;
        backdrop-filter: blur(30px);
        border: 1px solid rgba(255, 255, 255, 0.5) !important;
        border-radius: 25px !important;
        box-shadow:
            0 8px 20px rgba(0, 0, 0, 0.05),
            inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
        padding: 6px 6px 6px 12px !important;
        margin: 0 12px !important;
    }

    #message-input {
        color: #1f2937 !important;
    }

    #message-input::placeholder {
        color: #6b7280 !important;
    }

    #send-button {
        background: linear-gradient(135deg, #3b82f6, #8b5cf6) !important;
        /* Blue to Purple */
        border-radius: 50% !important;
        width: 40px !important;
        height: 40px !important;
        color: white !important;
        box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3) !important;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
    }

    #send-button:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 15px rgba(59, 130, 246, 0.4) !important;
    }

    #send-button:active {
        transform: scale(0.95);
    }

    /* 5. Animations */

    /* Opening State */
    #chat-window.opening {
        display: flex !important;
        pointer-events: auto;
        animation: windowOpen 450ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    /* Closing State */
    #chat-window.closing {
        display: flex !important;
        pointer-events: none;
        animation: windowClose 350ms cubic-bezier(0.4, 0, 1, 1) forwards;
    }

    /* Open state (static after animation) */
    #chat-window.open:not(.opening):not(.closing) {
        display: flex !important;
        opacity: 1;
        transform: scale(1) translateY(0);
        pointer-events: auto;
        visibility: visible;
    }

    /* Keyframes */
    @keyframes windowOpen {
        0% {
            transform: scale(0) translateY(50px);
            opacity: 0;
        }

        70% {
            transform: scale(1.05) translateY(-5px);
            opacity: 1;
        }

        85% {
            transform: scale(0.98) translateY(2px);
        }

        100% {
            transform: scale(1) translateY(0);
            opacity: 1;
        }
    }

    @keyframes windowClose {
        0% {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        100% {
            transform: scale(0) translateY(50px);
            opacity: 0;
        }
    }

    @keyframes cloudFloat {

        0%,
        100% {
            transform: translate(0, 0) scale(1);
        }

        25% {
            transform: translate(30px, -20px) scale(1.1);
        }

        50% {
            transform: translate(50px, 10px) scale(0.95);
        }

        75% {
            transform: translate(20px, 30px) scale(1.05);
        }
    }

    /* Cascade Content Appearance */
    #chat-window.opening header {
        animation: contentFadeIn 300ms ease-out 150ms forwards;
        opacity: 0;
    }

    #chat-window.opening #chat-messages {
        animation: contentFadeIn 300ms ease-out 250ms forwards;
        opacity: 0;
    }

    #chat-window.opening #chat-footer {
        animation: contentFadeIn 300ms ease-out 350ms forwards;
        opacity: 0;
    }

    @keyframes contentFadeIn {
        from {
            opacity: 0;
            transform: translateY(15px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
}